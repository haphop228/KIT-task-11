global:
  resolve_timeout: 5m

route:
  group_by: ['alertname', 'job']
  group_wait: 30s
  group_interval: 5m
  repeat_interval: 1h
  receiver: 'telegram-notifications'

receivers:
- name: 'telegram-notifications'
  telegram_configs:
    # –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –£–∫–∞–∑—ã–≤–∞–µ–º –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É —Å —Ç–æ–∫–µ–Ω–æ–º –í–ù–£–¢–†–ò –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
  - bot_token_file: '/etc/alertmanager/secrets/telegram_bot_token'
    
    # ID —á–∞—Ç–∞ –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –Ω–∞–ø—Ä—è–º—É—é
    chat_id: -1002743466882
    
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º HTML –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
    parse_mode: 'HTML'
    
    # –£–ª—É—á—à–µ–Ω–Ω—ã–π —à–∞–±–ª–æ–Ω —Å–æ–æ–±—â–µ–Ω–∏—è —Å–æ —Å—Å—ã–ª–∫–æ–π –Ω–∞ Prometheus
    message: |
      {{ range .Alerts }}
      <b>{{ if eq .Status "firing" }}üî• FIRING üî•{{ else }}‚úÖ RESOLVED ‚úÖ{{ end }}</b>
      <b>Alert:</b> {{ .Labels.alertname }} ({{ .Labels.severity | toUpper }})
      <b>Description:</b> {{ .Annotations.description }}
      <b>Details:</b>
      {{ range .Labels.SortedPairs }} ‚Ä¢ <b>{{ .Name }}</b>: <code>{{ .Value }}</code>
      {{ end }}<a href="{{ .GeneratorURL }}">GOTO: Prometheus Graph</a>
      {{ end }}
    send_resolved: true
