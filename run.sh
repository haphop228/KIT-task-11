#!/bin/bash

# –°–∫—Ä–∏–ø—Ç-–æ–±–µ—Ä—Ç–∫–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–ø—É—Å–∫–æ–º –ø—Ä–æ–µ–∫—Ç–∞.
# –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ñ–ª–∞–≥ 'profile'.

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–µ—Ä–≤—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç, –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç—É
if [ "$1" == "profile" ]; then
  # --- –†–ï–ñ–ò–ú –ü–†–û–§–ò–õ–ò–†–û–í–ê–ù–ò–Ø ---
  echo "üöÄ –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ –ü–†–û–§–ò–õ–ò–†–û–í–ê–ù–ò–Ø..."
  # –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ñ–ª–∞–≥ -f, —á—Ç–æ–±—ã —è–≤–Ω–æ —É–∫–∞–∑–∞—Ç—å Docker Compose, –∫–∞–∫–∏–µ —Ñ–∞–π–ª—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å.
  # –û–Ω "–Ω–∞–ª–æ–∂–∏—Ç" profiling.override.yml –ø–æ–≤–µ—Ä—Ö docker-compose.yml.
  docker-compose -f docker-compose.yml -f profiling.override.yml up --build

else
  # --- –û–ë–´–ß–ù–´–ô –†–ï–ñ–ò–ú ---
  echo "üöÄ –ó–∞–ø—É—Å–∫ –≤ –û–ë–´–ß–ù–û–ú —Ä–µ–∂–∏–º–µ..."
  docker-compose up -d --build
fi